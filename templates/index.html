<!DOCTYPE html>
<html>
<head>
    <title>캠핑장 예약 감시</title>
    <style>
        body { font-family: sans-serif; }
        .site-card { border: 1px solid #ccc; padding: 15px; margin-bottom: 20px; border-radius: 5px; }
        .site-title { font-size: 1.5em; margin-bottom: 10px; }
        .status-active { color: green; }
        .status-inactive { color: red; }
        .message { color: blue; margin-bottom: 15px; }
    </style>
</head>
<body>
    <h1>캠핑장 예약 감시</h1>

    {% if messages %}
        {% for message in messages %}
        <p class="message">{{ message }}</p>
        {% endfor %}
    {% endif %}

    {% for site_id, site in sites.items() %}
    <div class="site-card">
        <h2 class="site-title">{{ site.display_name }}</h2>
        <p>
            <strong>상태:</strong>
            {% if site.monitoring_active %}
                <span class="status-active">감시 중</span>
            {% else %}
                <span class="status-inactive">중단됨</span>
            {% endif %}
        </p>
        <p>
            <strong>현재 감시 날짜:</strong> {{ site.dates | join(', ') }}
        </p>

        <form action="/update-site" method="post">
            <input type="hidden" name="site_id" value="{{ site_id }}">
            
            <div>
                <label for="dates-{{ site_id }}">감시 날짜 변경 (YYYYMMDD, 쉼표로 구분):</label><br>
                <input type="text" id="dates-{{ site_id }}" name="dates" value="{{ site.dates | join(', ') }}" size="30">
                <button type="submit" name="action" value="save_dates">날짜 저장</button>
            </div>
            
            <div style="margin-top: 10px;">
                {% if site.monitoring_active %}
                    <button type="submit" name="action" value="stop">감시 중단</button>
                {% else %}
                    <button type="submit" name="action" value="start">감시 시작</button>
                {% endif %}
            </div>
        </form>
    </div>
    {% endfor %}
</body>
</html>
